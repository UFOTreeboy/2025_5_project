{% extends "base.html" %}

{% block body %}
<body>
    <h1>顧客資料管理系統</h1>

    <form action="/main" method="post">
        <h2>新增顧客</h2>
        <label>聯絡人 (Contact Person): <input type="text" name="Contact Person" required></label>
        <label>Email: <input type="email" name="Email"></label>
        <label>電話 (Phone): <input type="text" name="Phone"></label>
        <label>地址 (Address): <input type="text" name="Address"></label>
        <input type="submit" value="新增">
    </form>

    <h2>顧客清單</h2>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>聯絡人</th>
                <th>Email</th>
                <th>電話</th>
                <th>地址</th>
                <th>操作</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr>
                <td>{{ user['_id'] }}</td>
                <td>{{ user['Contact Person'] or 'None' }}</td>
                <td>{{ user['Email'] or 'None' }}</td>
                <td>{{ user['Phone'] or 'None' }}</td>
                <td>{{ user['Address'] or 'None' }}</td>
                <td>
                    <!-- 更新表單 -->
                    <form action="/main" method="post" style="display:inline;">
                        <input type="hidden" name="_id" value="{{ user['_id'] }}">
                        <input type="text" name="Contact Person" value="{{ user['Contact Person'] }}" required>
                        <input type="email" name="Email" value="{{ user['Email'] }}">
                        <input type="text" name="Phone" value="{{ user['Phone'] }}">
                        <input type="text" name="Address" value="{{ user['Address'] }}">
                        <input type="hidden" name="_method" value="put">  <!-- 模擬 PUT -->
                        <input type="submit" value="更新">
                    </form>

                    <!-- 刪除表單 -->
                    <form action="/main" method="post" style="display:inline;">
                        <input type="hidden" name="_id" value="{{ user['_id'] }}">
                        <input type="hidden" name="_method" value="delete">  <!-- 模擬 DELETE -->
                        <input type="submit" value="刪除" onclick="return confirm('確定要刪除這筆資料嗎？');">
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</body>
{% endblock %}
